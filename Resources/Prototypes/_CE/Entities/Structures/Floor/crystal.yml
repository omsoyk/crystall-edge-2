- type: entity
  id: CEFloorCrystal
  parent: BaseStructure
  categories: [ ForkFiltered ]
  name: crystal growths
  description: Crystallized magical energy that appears in places with high concentrations of mana. Can be used as a one-time source of energy.
  components:
  - type: Sprite
    snapCardinals: true
    drawdepth: FloorTiles
    sprite: _CE/Structures/Floor/crystal.rsi
    layers:
    - state: cr1
      shader: unshaded
      map: ["random"]
  - type: RandomSprite
    available:
    - random:
        cr1: Inherit
        cr2: Inherit
        cr3: Inherit
        cr4: Inherit
        cr5: Inherit
  - type: Transform
    anchored: True
  - type: Damageable
    damageContainer: Inorganic
    damageModifierSet: Glass
  - type: MeleeSound
    soundGroups:
      Brute:
        collection: GlassSmash
  - type: Physics
    bodyType: Static
  - type: TileEmission
    color: "#00ddff"
  - type: Fixtures
    fixtures:
      fix1:
        hard: false
        shape:
          !type:PhysShapeAabb
          bounds: "-0.45,-0.45,0.45,0.45"
        density: 60
        mask:
        - HalfWallLayer
        layer:
        - MidImpassable
        - LowImpassable
      fix2: #For melee or laser
        hard: true
        shape:
          !type:PhysShapeAabb
          bounds: "-0.35,-0.35,0.35,0.35"
        mask:
        - FullTileMask
        layer:
        - Opaque
  - type: Appearance
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 10
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: GlassBreak
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:SpawnEntitiesBehavior
        spawn:
          CEEnergyCrystalShard:
            min: 0
            max: 1
