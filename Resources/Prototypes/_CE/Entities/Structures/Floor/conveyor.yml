- type: entity
  id: CEConveyorBelt
  name: conveyor belt
  description: TODO
  categories: [ ForkFiltered ]
  placement:
    mode: SnapgridCenter
  components:
  - type: PlacementReplacement
    key: walls
  - type: Rotatable
    rotateWhileAnchored: true
  - type: Clickable
  - type: InteractionOutline
  - type: Transform
    anchored: true
  - type: Sprite
    sprite: _CE/Structures/Floor/conveyor.rsi
    state: base
    drawdepth: HighFloorObjects
  - type: Physics
    bodyType: Static
  - type: Anchorable
  - type: Pullable
  - type: Fixtures
    fixtures:
      conveyor:
        shape: !type:PolygonShape
          vertices:
          - -0.40,-0.80
          - 0.40,-0.80
          - 0.40,0.80
          - -0.40,0.80
        layer:
        - ConveyorMask
        hard: False
  - type: Conveyor
  - type: Appearance
  - type: GenericVisualizer
    visuals:
      enum.ConveyorVisuals.State:
        enum.ConveyorState.Off:
          Off: { state: base }
          Forward: { state: moving_forward }
          Reverse: { state: moving_backward }
  - type: PowerConsumer
    voltage: Medium
    drawRate: 0.5
  - type: NodeContainer
    nodes:
      power:
        !type:CableDeviceNode
        nodeGroupID: MVPower
  - type: Construction
    graph: CEConveyorBelt
    node: CEConveyorBelt
  - type: Damageable
    damageContainer: Inorganic
    damageModifierSet: Metallic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 40
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          CEBrassScrap1:
            min: 1
            max: 1
          CEIronScrap1:
            min: 1
            max: 1
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:DoActsBehavior
        acts: [ "Destruction" ]

- type: entity
  id: CEConveyorLadder
  name: conveyor ladder
  parent: CEConveyorBelt
  description: TODO
  categories: [ ForkFiltered ]
  placement:
    mode: SnapgridCenter
  components:
  - type: PlacementReplacement
    key: walls
  - type: Sprite
    drawdepth: Mobs
    sprite: _CE/Structures/Floor/conveyor_ladder.rsi
  - type: CEZLevelHighGround
    stick: true
    heightCurve:
    - 1.05
    - 1.05
    - 0.1
    - 0.1
  - type: Conveyor
    speed: 3 # needed for stairs so that objects don't get stuck at the top, on the map above
  - type: Construction
    graph: CEConveyorLadder
    node: CEConveyorLadder

- type: entity
  id: CEConveyorLadderReverse
  parent: CEConveyorLadder
  suffix: Reverse
  placement:
    mode: SnapgridCenter
  components:
  - type: Sprite
    sprite: _CE/Structures/Floor/conveyor_ladder_inversed.rsi
  - type: CEZLevelHighGround
    stick: true
    heightCurve:
    - 0.1
    - 0.1
    - 1.05
    - 1.05
  - type: Construction
    graph: CEConveyorLadder
    node: CEConveyorLadderReverse
